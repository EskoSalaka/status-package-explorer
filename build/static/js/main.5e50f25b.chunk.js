(this["webpackJsonpstatus-package-explorer"]=this["webpackJsonpstatus-package-explorer"]||[]).push([[0],{18:function(e,t,n){e.exports=n(28)},28:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(15),i=n(4),o=n(6),c={header:{backgroundColor:"#432b4e",display:"flex",alignItems:"center",justifyContent:"center",color:"white"},div:{width:"800px"},a:{color:"inherit"}},s=function(){return l.a.createElement("header",{style:c.header},l.a.createElement("div",{style:c.div},l.a.createElement("h1",null,"A simple software package status file explorer"),l.a.createElement("p",null,"To explore the contents of the status file containing the information on packages that the system knows about, just locate the file and click on the packages. On Debian and Ubuntu systems, the status file is located in ",l.a.createElement("i",null,"/var/lib/dpkg/status/"),"."),l.a.createElement("p",null,'Generally, the status file should be of the "binary package control file" - format described in:'," ",l.a.createElement("a",{style:c.a,href:"https://www.debian.org/doc/debian-policy/ch-controlfields.html"},"https://www.debian.org/doc/debian-policy/ch-controlfields.html"))))},u=n(7),d=function(){var e=Object(a.useState)((function(){try{var e=window.localStorage.getItem("packages");return e?JSON.parse(e):[]}catch(t){return console.log(t),[]}})),t=Object(u.a)(e,2),n=t[0],l=t[1];return[n,function(e){try{l(e),window.localStorage.setItem("packages",JSON.stringify(e))}catch(t){console.log(t)}}]},p={innerDisplayHeader:{marginRight:20,fontWeight:"bold"},link:{textDecoration:"none"}},m=function(e){var t=e.depends,n=e.packageNames;return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{style:p.innerDisplayHeader},"Dependencies"),l.a.createElement("p",null,t.map((function(e,a){if(1===e.length){var r=e[0];return n.includes(r)?l.a.createElement(i.b,{key:r,style:p.link,to:r},t.length===a+1?r:r+", "):l.a.createElement("span",null,t.length===a+1?r:r+", ")}return e.map((function(r,o){return n.includes(r)?l.a.createElement(i.b,{key:r,style:p.link,to:r},e.length!==o+1?r+" | ":t.length===a+1?r:r+", "):l.a.createElement("span",null,e.length!==o+1?r+" | ":t.length===a+1?r:r+", ")}))}))))},f={descriptionFieldDisplay:{},innerDisplayHeader:{marginRight:20,fontWeight:"bold"},link:{textDecoration:"none"}},g=function(e){var t=e.reverseDepends;return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",{style:f.innerDisplayHeader},"Reverse ",l.a.createElement("br",null),"Dependencies"),l.a.createElement("p",null,t.map((function(e,n){return l.a.createElement(i.b,{key:e,style:f.link,to:e},t.length===n+1?e:e+", ")}))))},h={card:{boxShadow:"0 4px 8px 0 rgba(0,0,0,0.2)",transition:"0.3s",maxWidth:600,padding:20,marginTop:20},cardContainer:{display:"grid",justifyItems:"start",gridTemplateColumns:"auto minmax(0, 1fr)",gridTemplateAreas:"Header Content"},innerDisplayHeader:{marginRight:20,fontWeight:"bold"}},E=function(e){var t=e.match,n=d(),a=Object(u.a)(n,1)[0],r=t.url.replace("/","").trim(),o=a.find((function(e){return e.Package===r}));return l.a.createElement("div",null,l.a.createElement(i.b,{to:"/"},l.a.createElement("button",{type:"button"},"\u21d0 Home")),o?l.a.createElement("div",{style:h.card},l.a.createElement("h1",null,o.Package),l.a.createElement("div",{style:h.cardContainer},l.a.createElement("p",{style:h.innerDisplayHeader},"Description"),l.a.createElement("p",null,o.Description.split("\n").map((function(e,t){return l.a.createElement("span",{key:t},e,l.a.createElement("br",null))}))),l.a.createElement(m,{depends:o.Depends,packageNames:a.map((function(e){return e.Package}))}),l.a.createElement(g,{reverseDepends:o.ReverseDepends}))):l.a.createElement("b",null,' No info on the package "'.concat(r,"\" can't be found on the given control file")))},y=function(e){var t={};return t.Package=k(e,"Package"),t.Description=k(e,"Description"),t.Depends=k(e,"Depends"),t},k=function(e,t){if(e.includes(t)){for(var n=e.split("".concat(t,":"))[1].trim().split("\n"),a=n[0],l=1;l<n.length&&(/^\s/.test(n[l])&&l>0);l++)a=a+"\n"+n[l];return a.trim()}return""},b=function(e){e.forEach((function(e){if(""===e.Depends)e.Depends=[];else{var t=e.Depends.replace(/ *\([^)]*\) */g,"").split(",").map((function(e){return e.trim()}));e.Depends=[],t.forEach((function(t){t.includes("|")?e.Depends.push(t.split("|").map((function(e){return e.trim()}))):e.Depends.flat().includes(t)||e.Depends.push([t])})),e.Depends.sort((function(e,t){return e<t?-1:1}))}}))},D=function(e){e.forEach((function(t){t.ReverseDepends=[],e.forEach((function(e){e.Depends.flat().includes(t.Package)&&t.ReverseDepends.push(e.Package)})),t.ReverseDepends.sort((function(e,t){return e<t?-1:1}))}))},v=function(e){if(!e.includes("Package: ")||!e.includes("Description: ")||!e.includes("Architecture: "))throw new Error("Invalid control file")},w=function(e){v(e);var t=e.split(/\n\s*\t*\n/).filter(Boolean).map((function(e){return y(e)}));return b(t),D(t),t.sort((function(e,t){return e.Package<t.Package?-1:1}))},x={packageLink:{fontWeight:"bold",textDecoration:"none",fontSize:18},fileUploadContainer:{display:"flex",alignItems:"center"},fileUploadContents:{paddingRight:10},errorMessage:{color:"#D8000C",backgroundColor:"#FFBABA",borderRadius:15,padding:10},listBox:{flexDirection:"column",flexWrap:"wrap",columnCount:3,columnFill:"balance"},listItem:{justifyContent:"center",flexDirection:"column",textAlign:"start"},card:{minHeight:100,minWidth:300,display:"inline-block",boxShadow:"0 4px 8px 0 rgba(0,0,0,0.2)",transition:"0.3s",padding:20}},C=function(){var e=Object(a.useRef)(),t=Object(a.useState)(null),n=Object(u.a)(t,2),r=n[0],o=n[1],c=d(),s=Object(u.a)(c,2),p=s[0],m=s[1];return l.a.createElement("div",null,l.a.createElement("div",{style:x.fileUploadContainer},l.a.createElement("h3",{style:x.fileUploadContents},"Upload the control file "),l.a.createElement("input",{style:x.fileUploadContents,type:"file",id:"fileInput",ref:e,onChange:function(t){if(window.File&&window.FileReader&&window.FileList&&window.Blob){t.preventDefault();var n=new FileReader;n.onload=function(e){try{var t=w(e.target.result);console.log("===================================="),console.log(t),console.log("===================================="),m(t),o(null)}catch(n){o("Failed reading the given file. Make sure that the given file is a correct control file.")}},n.readAsText(e.current.files[0])}else o("Looks like your browser doesn't support the HTML5 file API")}}),r&&l.a.createElement("p",{style:x.errorMessage},r)),l.a.createElement("div",{style:x.card},l.a.createElement("h1",null,"Packages"),l.a.createElement("div",null,l.a.createElement("ul",{style:x.listBox},p.map((function(e){return l.a.createElement("li",{style:x.listItem,key:e.Package},l.a.createElement(i.b,{style:x.packageLink,to:e.Package},e.Package))}))))))},P={body:{margin:20}},R=function(){return l.a.createElement("div",null,l.a.createElement(s,null),l.a.createElement("div",{style:P.body},l.a.createElement(i.a,null,l.a.createElement(o.a,{exact:!0,path:"/",component:C}),l.a.createElement(o.a,{exact:!0,path:"/:packageName",component:E}))))};Object(r.render)(l.a.createElement(R,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.5e50f25b.chunk.js.map